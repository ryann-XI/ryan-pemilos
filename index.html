<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pemilihan Ketua OSIS</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0f1724;
      --glass-border: rgba(255,255,255,0.08);
      --muted: rgba(255,255,255,0.6);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      background: var(--bg);
      font-family: Inter, sans-serif;
      padding:40px 20px;
      display:flex;
      justify-content:center;
    }

    .container{
      width:100%;
      max-width:960px;
      background:rgba(255,255,255,0.04);
      border:1px solid var(--glass-border);
      backdrop-filter:blur(8px);
      border-radius:16px;
      padding:24px;
      display:grid;
      grid-template-columns:1fr 380px;
      gap:24px;
    }

    form{
      background:rgba(255,255,255,0.02);
      padding:18px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.04);
    }

    input{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.05);
      background:rgba(255,255,255,0.05);
      color:white;
      margin-bottom:12px;
    }

    .candidate{
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.05);
      padding:12px;
      border-radius:10px;
      display:flex;
      gap:10px;
      cursor:pointer;
      margin-bottom:10px;
    }

    .candidate.selected{
      border:1px solid rgba(63,138,255,0.6);
      background:rgba(63,138,255,0.15);
    }

    button{
      padding:12px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:600;
      margin-top:6px;
    }

    .primary{
      background:linear-gradient(90deg,#7a57ff,#3f8aff);
      color:white;
      width:100%;
    }

    aside{
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.05);
      padding:18px;
      border-radius:12px;
    }

    .bar{
      height:10px;
      background:rgba(255,255,255,0.1);
      border-radius:50px;
      overflow:hidden;
    }

    .bar i{
      display:block;
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#7a57ff,#3f8aff);
      transition:width .6s;
    }

  </style>
</head>
<body>
<div class="container">

  <form id="voteForm">
    <input id="fullname" placeholder="Nama Lengkap" />
    <input id="kelas" placeholder="Kelas" />

    <div id="candidateList"></div>

    <button class="primary" type="submit">Kirim Suara</button>
  </form>

  <aside>
    <h3>Hasil Voting</h3>
    <div id="results"></div>
    <div style="margin-top:10px">Total: <span id="total">0</span></div>
  </aside>

</div>

<script>
const CANDIDATES = [
  {id:"arini",name:"Arini Ataka"},
  {id:"kaka",name:"Kaka Dwi"},
  {id:"bagus",name:"Bagus"}
];

const STORAGE="votes_v1";
const STORAGE_FLAG="voted_v1";

const candidateList=document.getElementById("candidateList");
const results=document.getElementById("results");
const totalEl=document.getElementById("total");

function readVotes(){
  const r=localStorage.getItem(STORAGE);
  if(!r){
    const init={arini:0,kaka:0,bagus:0};
    localStorage.setItem(STORAGE,JSON.stringify(init));
    return init;
  }
  return JSON.parse(r);
}

function writeVotes(v){
  localStorage.setItem(STORAGE,JSON.stringify(v));
}

function renderCandidates(){
  candidateList.innerHTML="";
  CANDIDATES.forEach(c=>{
    const div=document.createElement("div");
    div.className="candidate";
    div.textContent=c.name;
    div.dataset.id=c.id;

    div.onclick=()=>{
      document.querySelectorAll(".candidate").forEach(e=>e.classList.remove("selected"));
      div.classList.add("selected");
    };

    candidateList.appendChild(div);
  });
}

function renderResults(){
  const v=readVotes();
  const total=v.arini+v.kaka+v.bagus;

  results.innerHTML="";

  CANDIDATES.forEach(c=>{
    const wrap=document.createElement("div");
    wrap.textContent=c.name+" ("+(v[c.id]||0)+")";

    const bar=document.createElement("div");
    bar.className="bar";

    const fill=document.createElement("i");
    bar.appendChild(fill);

    results.appendChild(wrap);
    results.appendChild(bar);

    setTimeout(()=>{
      fill.style.width=total?((v[c.id]/total)*100)+"%":"0%";
    },50);
  });

  totalEl.textContent=total;
}

function submitVote(id){
  if(localStorage.getItem(STORAGE_FLAG)) return;

  const v=readVotes();
  v[id]++;
  writeVotes(v);
  localStorage.setItem(STORAGE_FLAG,"1");

  renderResults();

  document.querySelector("aside").scrollIntoView({behavior:"smooth"});
}

document.getElementById("voteForm").onsubmit=e=>{
  e.preventDefault();

  const name=fullname.value.trim();
  const kelas=kelas.value.trim();
  const selected=document.querySelector(".candidate.selected");

  if(!name||!kelas||!selected){
    alert("Lengkapi data & pilih kandidat");
    return;
  }

  submitVote(selected.dataset.id);
};

renderCandidates();
renderResults();
</script>

</body>
</html>
